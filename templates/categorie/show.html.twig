{% extends 'baseFront.html.twig' %}


{% block body %}
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">

    {{ include('categorie/index.html.twig') }}
    <hr>
    <div class="products-grid-view">

        <ul>  {% for produit in categorie.productId %}
                <li class="grid__item item-row  wide--one-quarter post-large--one-third large--one-half medium--one-half small-grid__item  medium--one-half small--one-half   on-sale" id="product-1961821405284">

                    <div class="products product-hover-14 wow fadeInUp animated">
                        <div class="product-container">


                            <a href="../products/stereo-headphones-black.html" class="grid-link">
                                <div class="ImageOverlayCa"></div>
                                <div class="reveal">
        <span class="product-additional">
          <img src="{{ asset('uploads/images/' ~ produit.image) }}" class="featured-image" alt="Stereo Headphones (Black)">
        </span>
                                    <img  src="{{ asset('uploads/images/' ~ produit.image) }}" class="hidden-feature_img" alt="Stereo Headphones (Black)" />
                                </div>
                            </a>
                            <div class="ImageWrapper">
                                <div class="product-button">
                                    <a href="{{ path('produit_showC', {'id': produit.id}) }}" >

                                        <i> Détaill</i>
                                    </a>
                                    <form  action="https://mefit-demo.myshopify.com/cart/add" method="post" class="gom variants clearfix" id="cart-form-1961821405284">
                                        <input type="hidden" name="id" value="18490196263012" />
                                        <a class="add-cart-btn"  title="Add to Cart" >
                                            <b class="fas fa-shopping-cart"></b>
                                            <i>Ajouter au Panier</i>
                                        </a>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="product-detail">

                            <a href="#" class="grid-link__title">{{ produit.nom }}</a>
                            <div class="grid-link__meta">



                                <div class="product_price">
                                    <div class="grid-link__org_price" id="ProductPrice">
                                        <span> {{ produit.prix }} DT</span>
                                    </div>
                                </div>
                                <div class="stars">
                                    <i class="lar la-star" data-value="1"></i><!----
                                ---><i class="lar la-star" data-value="2"></i><!----
                                ---><i class="lar la-star" data-value="3"></i><!----
                                ---><i class="lar la-star" data-value="4"></i><!----
                                ---><i class="lar la-star" data-value="5"></i>
                                </div>
                                <input type="hidden" name="note" id="note" value="0">
                                <script>
                                    window.onload = () => {
                                        // On va chercher toutes les étoiles
                                        const stars = document.querySelectorAll(".la-star");

                                        // On va chercher l'input
                                        const note = document.querySelector("#note");

                                        // On boucle sur les étoiles pour le ajouter des écouteurs d'évènements
                                        for(star of stars){
                                            // On écoute le survol
                                            star.addEventListener("mouseover", function(){
                                                resetStars();
                                                this.style.color = "red";
                                                this.classList.add("las");
                                                this.classList.remove("lar");
                                                // L'élément précédent dans le DOM (de même niveau, balise soeur)
                                                let previousStar = this.previousElementSibling;

                                                while(previousStar){
                                                    // On passe l'étoile qui précède en rouge
                                                    previousStar.style.color = "red";
                                                    previousStar.classList.add("las");
                                                    previousStar.classList.remove("lar");
                                                    // On récupère l'étoile qui la précède
                                                    previousStar = previousStar.previousElementSibling;
                                                }
                                            });

                                            // On écoute le clic
                                            star.addEventListener("click", function(){
                                                note.value = this.dataset.value;
                                            });

                                            star.addEventListener("mouseout", function(){
                                                resetStars(note.value);
                                            });
                                        }

                                        /**
                                         * Reset des étoiles en vérifiant la note dans l'input caché
                                         * @param {number} note
                                         */
                                        function resetStars(note = 0){
                                            for(star of stars){
                                                if(star.dataset.value > note){
                                                    star.style.color = "black";
                                                    star.classList.add("lar");
                                                    star.classList.remove("las");
                                                }else{
                                                    star.style.color = "red";
                                                    star.classList.add("las");
                                                    star.classList.remove("lar");
                                                }
                                            }
                                        }
                                    }
                                </script>
                            </div>
                        </div>
                    </div>
                </li> {% endfor %} </ul>
    </div>
{% endblock %}
